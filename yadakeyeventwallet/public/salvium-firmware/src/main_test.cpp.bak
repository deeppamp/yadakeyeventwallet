#include <Arduino.h>
#include <TFT_eSPI.h>

// ESP32-2432S028 "Cheap Yellow Display"
// 2.8" ILI9341 TFT 320x240
#define TFT_BL 21  // Backlight pin

TFT_eSPI tft = TFT_eSPI();

void setup() {
  Serial.begin(115200);
  delay(1000);
  
  Serial.println("\n========================================");
  Serial.println("  ESP32-2432S028 TFT TEST");
  Serial.println("  320x240 ILI9341 Display");
  Serial.println("========================================");
  
  // Initialize backlight
  pinMode(TFT_BL, OUTPUT);
  digitalWrite(TFT_BL, HIGH);  // Turn on backlight
  Serial.println("[OK] Backlight ON");
  
  // Initialize TFT
  Serial.println("[TEST] Initializing TFT...");
  tft.init();
  tft.setRotation(1);  // Landscape mode
  Serial.println("[OK] TFT initialized!");
  
  // Test 1: Full white screen
  Serial.println("[TEST] Drawing FULL WHITE screen...");
  tft.fillScreen(TFT_WHITE);
  delay(2000);
  
  // Test 2: Color gradient
  Serial.println("[TEST] Drawing COLOR GRADIENT...");
  tft.fillScreen(TFT_BLACK);
  tft.fillRect(0, 0, 106, 240, TFT_RED);
  tft.fillRect(107, 0, 106, 240, TFT_GREEN);
  tft.fillRect(214, 0, 106, 240, TFT_BLUE);
  delay(2000);
  
  // Test 3: Text
  Serial.println("[TEST] Drawing TEXT...");
  tft.fillScreen(TFT_BLACK);
  tft.setTextColor(TFT_WHITE, TFT_BLACK);
  tft.setTextSize(3);
  tft.setCursor(60, 100);
  tft.println("WORKING!");
  
  tft.setTextSize(2);
  tft.setCursor(40, 150);
  tft.setTextColor(TFT_YELLOW);
  tft.println("ESP32-2432S028");
  
  tft.setCursor(80, 180);
  tft.setTextColor(TFT_GREEN);
  tft.println("TFT Display");
  
  Serial.println("[SUCCESS] TFT display is working!");
  Serial.println("You should see: WHITE -> RGB bars -> Text");
}

void loop() {
  // Cycle through colors
  delay(1000);
  tft.fillScreen(TFT_RED);
  delay(1000);
  tft.fillScreen(TFT_GREEN);
  delay(1000);
  tft.fillScreen(TFT_BLUE);
}
